<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>재채기하는 스마일 🤧</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
      background-color: #f9f9f9;
      color: #222;
      text-align: center;
      height: 100vh;
      overflow: hidden;
    }

    .center {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .btn {
      background-color: #007aff;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 12px;
      font-size: 16px;
      margin: 10px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .btn:hover {
      background-color: #005bbb;
    }

    #smile {
      font-size: 90px;
      margin-bottom: 30px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    #smile:active {
      transform: scale(1.1);
    }

    .bubble {
      position: absolute;
      bottom: 90px;
      left: 80px;
      background: white;
      border: 1px solid #ddd;
      border-radius: 12px;
      padding: 8px 12px;
      font-size: 14px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .airplane-scene {
      width: 100vw;
      height: 100vh;
      background: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .window-view {
      width: 280px;
      height: 180px;
      border-radius: 20px;
      overflow: hidden;
      background: #fff;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    .window-view img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .flight-status {
      font-size: 16px;
      color: #555;
      margin-bottom: 20px;
    }

    .hand {
      font-size: 40px;
      position: absolute;
      top: 70%;
      left: 50%;
      transform: translateX(-50%);
      transition: top 0.3s ease-in-out;
    }
  </style>
</head>
<body>
  <div id="main" class="center">
    <div id="smile">😊</div>
    <button id="sneezeButton" class="btn">재채기 🤧</button>
    <button id="coldButton" class="btn">추워!</button>
    <button id="hawaiiButton" class="btn">따뜻하게 해줘</button>
  </div>

  <div id="penguin" style="display: none; position: absolute; bottom: 20px; left: 20px; font-size: 40px;">🐧</div>
  <div class="bubble" id="penguinTalk" style="display: none;">조심해~ 감기 걸려~</div>

  <script>
    let sneezeCount = 0;

    const smile = document.getElementById('smile');
    const sneezeBtn = document.getElementById('sneezeButton');
    const hawaiiBtn = document.getElementById('hawaiiButton');
    const coldBtn = document.getElementById('coldButton');
    const penguin = document.getElementById('penguin');
    const penguinTalk = document.getElementById('penguinTalk');

    function sneeze() {
      smile.textContent = '🤧';
      setTimeout(() => smile.textContent = '😊', 300);
      sneezeCount++;

      const snow = document.createElement('div');
      snow.textContent = '❄️';
      snow.style.position = 'absolute';
      snow.style.left = Math.random() * window.innerWidth + 'px';
      snow.style.top = '0px';
      snow.style.fontSize = '24px';
      document.body.appendChild(snow);

      const fall = setInterval(() => {
        snow.style.top = (parseInt(snow.style.top) + 4) + 'px';
        if (parseInt(snow.style.top) > window.innerHeight) {
          clearInterval(fall);
          snow.remove();
        }
      }, 30);

      penguin.style.display = 'block';
      penguinTalk.style.display = 'block';
      setTimeout(() => {
        penguin.style.display = 'none';
        penguinTalk.style.display = 'none';
      }, 1500);
    }

    function clearScreen() {
      document.body.innerHTML = '';
    }

    function goToHawaii() {
      clearScreen();

      const scene = document.createElement('div');
      scene.className = 'airplane-scene';

      const windowView = document.createElement('div');
      windowView.className = 'window-view';
      windowView.innerHTML = `<img src="sky.jpeg" alt="sky view">`;

      const flightStatus = document.createElement('div');
      flightStatus.className = 'flight-status';
      flightStatus.textContent = '0s 가상 비행 중...';

      const mealBtn = document.createElement('button');
      mealBtn.textContent = '기내식 선택하기 🍱';
      mealBtn.className = 'btn';

      scene.appendChild(windowView);
      scene.appendChild(flightStatus);
      scene.appendChild(mealBtn);
      document.body.appendChild(scene);

      let time = 0;
      const timer = setInterval(() => {
        time += 10;
        flightStatus.textContent = `${time}s 가상 비행 중...`;
      }, 1000);

      setTimeout(() => {
        clearInterval(timer);
        eatMeal('비빔밥 🥘');
      }, 6000);

      mealBtn.onclick = () => {
        const modal = document.createElement('div');
        modal.style.position = 'fixed';
        modal.style.top = '50%';
        modal.style.left = '50%';
        modal.style.transform = 'translate(-50%, -50%)';
        modal.style.background = '#fff';
        modal.style.padding = '20px';
        modal.style.borderRadius = '12px';
        modal.style.boxShadow = '0 4px 12px rgba(0,0,0,0.2)';
        modal.innerHTML = `
          <div style="margin-bottom:10px;">기내식 선택:</div>
          <button class="btn" onclick="eatMeal('김밥 🍙')">김밥 🍙</button>
          <button class="btn" onclick="eatMeal('불고기 🍖')">불고기 🍖</button>
          <button class="btn" onclick="eatMeal('비빔밥 🥘')">비빔밥 🥘</button>
        `;
        document.body.appendChild(modal);
      };
    }

    function eatMeal(menu) {
      document.body.innerHTML = '';

      const tray = document.createElement('div');
      tray.style.width = '100vw';
      tray.style.height = '100vh';
      tray.style.background = '#f0f0f0';
      tray.style.display = 'flex';
      tray.style.flexDirection = 'column';
      tray.style.alignItems = 'center';
      tray.style.justifyContent = 'center';
      tray.style.position = 'relative';

      const mealImg = document.createElement('img');
      mealImg.src = `https://via.placeholder.com/200x150?text=${encodeURIComponent(menu)}`;
      mealImg.style.transition = 'transform 0.3s ease, opacity 0.3s ease';
      tray.appendChild(mealImg);

      const hand = document.createElement('div');
      hand.className = 'hand';
      hand.textContent = '👉🥢';
      tray.appendChild(hand);

      document.body.appendChild(tray);

      let bites = 0;
      const eatInterval = setInterval(() => {
        bites++;
        mealImg.style.transform = `scale(${1 - bites * 0.1})`;
        mealImg.style.opacity = `${1 - bites * 0.1}`;
        hand.style.top = bites % 2 === 0 ? '68%' : '72%';

        if (bites >= 5) {
          clearInterval(eatInterval);
          const doneBtn = document.createElement('button');
          doneBtn.className = 'btn';
          doneBtn.textContent = '다 먹었어요 😋';
          doneBtn.onclick = () => location.reload();
          tray.appendChild(doneBtn);
        }
      }, 800);
    }

    sneezeBtn.onclick = sneeze;
    smile.onclick = sneeze;
    document.body.onkeydown = (e) => {
      if (e.code === 'Space') sneeze();
    };
    hawaiiBtn.onclick = goToHawaii;
    coldBtn.onclick = () => alert('남극은 다음에~🐧');
  </script>
</body>
</html>
