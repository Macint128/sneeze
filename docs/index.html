<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>재채기하는 스마일 🤧</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      text-align: center;
      background-color: white;
      overflow: hidden;
    }
    .hidden { display: none; }
    .center { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }

    #smile { font-size: 80px; cursor: pointer; }
    #penguin { font-size: 40px; position: absolute; bottom: 10px; left: 10px; display: none; }
    .bubble { position: absolute; bottom: 80px; left: 60px; background: white; border: 2px solid #ccc; border-radius: 10px; padding: 10px; }

    .airplane-scene {
      background: white;
      position: absolute;
      width: 100%;
      height: 100%;
    }
    .window-view {
      width: 300px;
      height: 200px;
      border-radius: 20px;
      overflow: hidden;
      margin: 50px auto 10px;
      background: white;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
    }
    .window-view img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .flight-status {
      margin: 10px;
      font-size: 18px;
    }

    .btn { margin: 10px; padding: 10px 20px; font-size: 16px; cursor: pointer; }

    /* 기내식 UI */
    .hand {
      font-size: 40px;
      position: absolute;
      top: 70%;
      left: 50%;
      transform: translateX(-50%);
      transition: top 0.3s ease-in-out;
    }
  </style>
</head>
<body>
  <div id="main" class="center">
    <div id="smile">😊</div>
    <button id="sneezeButton" class="btn">재채기 🤧</button>
    <button id="coldButton" class="btn">추워!</button>
    <button id="hawaiiButton" class="btn">따뜻하게 해줘</button>
  </div>

  <div id="penguin">🐧</div>
  <div class="bubble hidden" id="penguinTalk">조심해~ 감기 걸려~</div>

  <script>
    let sneezeCount = 0;
    let antarcticaModeActive = false;

    const smile = document.getElementById('smile');
    const sneezeBtn = document.getElementById('sneezeButton');
    const hawaiiBtn = document.getElementById('hawaiiButton');
    const coldBtn = document.getElementById('coldButton');
    const penguin = document.getElementById('penguin');
    const penguinTalk = document.getElementById('penguinTalk');

    function sneeze() {
      smile.textContent = '🤧';
      setTimeout(() => smile.textContent = '😊', 300);
      sneezeCount++;

      let snow = document.createElement('div');
      snow.textContent = '❄️';
      snow.style.position = 'absolute';
      snow.style.left = Math.random() * window.innerWidth + 'px';
      snow.style.top = '0px';
      document.body.appendChild(snow);

      let fall = setInterval(() => {
        snow.style.top = (parseInt(snow.style.top) + 5) + 'px';
        if (parseInt(snow.style.top) > window.innerHeight) {
          clearInterval(fall);
          snow.remove();
        }
      }, 30);

      penguin.style.display = 'block';
      penguinTalk.classList.remove('hidden');
      setTimeout(() => {
        penguin.style.display = 'none';
        penguinTalk.classList.add('hidden');
      }, 1500);
    }

    function clearScreen() {
      document.body.innerHTML = '';
    }

    function goToHawaii() {
      clearScreen();

      const airplaneScene = document.createElement('div');
      airplaneScene.className = 'airplane-scene';

      const windowView = document.createElement('div');
      windowView.className = 'window-view';
      windowView.innerHTML = `<img src="sky.jpeg" alt="하늘">`;

      const flightStatus = document.createElement('div');
      flightStatus.className = 'flight-status';
      flightStatus.textContent = '0s 가상 비행 중...';

      const mealBtn = document.createElement('button');
      mealBtn.textContent = '기내식 선택하기 🍱';
      mealBtn.className = 'btn';

      mealBtn.onclick = () => {
        const modal = document.createElement('div');
        modal.style.position = 'fixed';
        modal.style.top = '50%';
        modal.style.left = '50%';
        modal.style.transform = 'translate(-50%, -50%)';
        modal.style.background = '#fff';
        modal.style.padding = '20px';
        modal.style.border = '2px solid #ccc';
        modal.style.borderRadius = '10px';
        modal.innerHTML = `
          <div style="margin-bottom:10px;">기내식 선택:</div>
          <button class="btn" onclick="eatMeal('김밥 🍙')">김밥 🍙</button>
          <button class="btn" onclick="eatMeal('불고기 🍖')">불고기 🍖</button>
          <button class="btn" onclick="eatMeal('비빔밥 🥘')">비빔밥 🥘</button>
        `;
        document.body.appendChild(modal);
      };

      airplaneScene.appendChild(windowView);
      airplaneScene.appendChild(flightStatus);
      airplaneScene.appendChild(mealBtn);
      document.body.appendChild(airplaneScene);

      let virtualTime = 0;
      const timer = setInterval(() => {
        virtualTime += 10;
        flightStatus.textContent = `${virtualTime}s 가상 비행 중...`;
      }, 1000);

      setTimeout(() => {
        clearInterval(timer);
        document.body.innerHTML = '';
        showHawaiiGame();
      }, 7000);
    }

    function showHawaiiGame() {
      document.body.className = 'hawaii';

      const gameArea = document.createElement('div');
      gameArea.className = 'game-area center';
      gameArea.innerHTML = `
        <div class="game-message">코코넛 따기!! 🥥</div>
        <div class="palm-tree" id="palmTree">🌴</div>
        <div class="coconut" id="coconut">🥥</div>
        <button class="btn" onclick="alert('시원하게 마셨다~ 🥥')">코코넛 마시기</button>
        <button class="btn" onclick="location.reload()">나가기</button>
      `;
      document.body.appendChild(gameArea);

      const palmTree = document.getElementById('palmTree');
      const coconut = document.getElementById('coconut');

      palmTree.addEventListener('mousedown', () => {
        coconut.style.top = '100px';
        coconut.style.opacity = '1';
      });
    }

    function goToAntarctica() {
      if (antarcticaModeActive) return;
      antarcticaModeActive = true;

      clearScreen();

      document.body.className = 'antarctica';

      const gameArea = document.createElement('div');
      gameArea.className = 'game-area center';
      gameArea.innerHTML = `
        <div class="game-message">눈 굴리기! ❄️</div>
        <div class="snowball" id="snowball" style="width:50px;height:50px;background:#ddd;border-radius:50%;margin:0 auto;"></div>
        <button class="btn" onclick="alert('눈사람 완성! ⛄')">눈사람 만들기</button>
        <button class="btn" onclick="location.reload()">나가기</button>
      `;
      document.body.appendChild(gameArea);
    }

    function eatMeal(menu) {
      document.body.innerHTML = '';

      const tray = document.createElement('div');
      tray.style.width = '100vw';
      tray.style.height = '100vh';
      tray.style.background = '#eee';
      tray.style.display = 'flex';
      tray.style.flexDirection = 'column';
      tray.style.alignItems = 'center';
      tray.style.justifyContent = 'center';
      tray.style.position = 'relative';

      const mealImg = document.createElement('img');
      mealImg.src = `https://via.placeholder.com/200x150?text=${encodeURIComponent(menu)}`;
      mealImg.style.transition = 'transform 0.3s ease, opacity 0.3s ease';
      tray.appendChild(mealImg);

      const hand = document.createElement('div');
      hand.className = 'hand';
      hand.textContent = '👉🥢';
      tray.appendChild(hand);

      document.body.appendChild(tray);

      let bites = 0;
      const eatInterval = setInterval(() => {
        bites++;
        mealImg.style.transform = `scale(${1 - bites * 0.1})`;
        mealImg.style.opacity = `${1 - bites * 0.1}`;
        hand.style.top = bites % 2 === 0 ? '68%' : '72%';

        if (bites >= 5) {
          clearInterval(eatInterval);
          const doneBtn = document.createElement('button');
          doneBtn.className = 'btn';
          doneBtn.textContent = '다 먹었어요 😋';
          doneBtn.onclick = () => alert('냠냠~ 기내식 최고였다!');
          tray.appendChild(doneBtn);
        }
      }, 800);
    }

    sneezeBtn.onclick = sneeze;
    smile.onclick = sneeze;
    document.body.onkeydown = (e) => { if (e.code === 'Space') sneeze(); };
    hawaiiBtn.onclick = goToHawaii;
    coldBtn.onclick = goToAntarctica;
  </script>
</body>
</html>
